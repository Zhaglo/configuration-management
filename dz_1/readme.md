# Shell Emulator
### Описание
Shell Emulator — это эмулятор командной оболочки, который имитирует поведение UNIX-подобной системы. Он работает с виртуальной файловой системой, которая хранится в ZIP-архиве, и поддерживает базовые команды, такие как ls, cd, chmod, echo, cal, а также ведет журнал действий с помощью JSON.

### Функциональные возможности
1. Команды:

* ls: Отображает список файлов в текущей директории.
* cd <dir>: Меняет текущую директорию.
* chmod <mode> <file>: Изменяет права доступа к файлу.
* echo <text>: Выводит текст в консоль или записывает в файл в архиве (с флагами -n, -e).
* cal: Показывает календарь для текущего месяца, указанного месяца или года.
2. Файловая система: Виртуальная файловая система хранится в ZIP-архиве, и все операции с файлами происходят внутри этого архива.

3. Журналирование: Все команды и их результаты записываются в лог-файл log.json.

### Требования
* Python 3.6+
* Библиотека zipfile (входит в стандартную библиотеку Python)
* Библиотека calendar (входит в стандартную библиотеку Python)
* Библиотека json (входит в стандартную библиотеку Python)
* Библиотека os (входит в стандартную библиотеку Python)
### Установка
1. Клонируйте репозиторий или загрузите файл с исходным кодом:

~~~bash
git clone https://github.com/Zhaglo/configuration-management/tree/master/dz_1
~~~
2. Установите все зависимости:

~~~bash
pip install -r requirements.txt
~~~
3. Создайте CSV конфигурационный файл, указывая путь к архиву, имя пользователя, имя хоста и путь к файлу журнала:

~~~csv
username,user
hostname,host
zip_path,/path/to/virtual_fs.zip
log_path,/path/to/log.json
start,./startup.txt
~~~
4. Убедитесь, что у вас есть ZIP-архив с виртуальной файловой системой, содержащий необходимые файлы и директории.

### Запуск
1. Для запуска эмулятора выполните команду:

~~~bash
python emulator.py /path/to/config.csv
~~~
2. После этого будет запущена командная оболочка, и вы сможете вводить команды, такие как:

* ls — вывести список файлов.
* cd <dir> — перейти в директорию.
* chmod <mode> <file> — изменить права доступа к файлу.
* echo <text> — вывести текст на экран или записать его в файл в архиве.
* cal — показать календарь.
3. Команды будут записываться в журнал в формате JSON.

### Пример использования
~~~bash
$ python emulator.py config.csv
user@host:/path/to$ ls
file1.txt
file2.txt
$ cd file1.txt
Directory "file1.txt" does not exist.
$ chmod 755 file1.txt
Permissions for file1.txt set to 755
$ echo "Hello, world!" > output.txt
Text written to output.txt
$ cal 12 2024
~~~
### Логирование
Все команды и их результаты записываются в файл log.json в формате JSON:

~~~json
[
    {
        "timestamp": "2024-11-23 14:05:00",
        "user": "user",
        "command": "ls",
        "result": "file1.txt\nfile2.txt"
    },
    {
        "timestamp": "2024-11-23 14:07:00",
        "user": "user",
        "command": "chmod 755 file1.txt",
        "result": "Permissions for file1.txt set to 755"
    }
]
~~~