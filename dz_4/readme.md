# Учебная Виртуальная Машина (УВМ)

Этот проект реализует ассемблер и интерпретатор для учебной виртуальной машины (УВМ). Цель проекта — преобразование текстовых программ в машинный код и выполнение этого кода с сохранением результата.

## Описание

### Ассемблер
Ассемблер переводит текстовую программу в бинарный файл машинного кода. Кроме того, он создает лог-файл с информацией об ассемблированных инструкциях в формате `ключ=значение`.

### Интерпретатор
Интерпретатор выполняет бинарный код, генерируемый ассемблером. Результаты выполнения сохраняются в CSV-файл.

## Формат инструкций

Система команд УВМ поддерживает следующие инструкции:

1. **PUSH_CONST**
   - **Код операции (A):** `87`
   - **Операнд (B):** Константа (28-битное знаковое число).
   - **Результат:** Добавляет константу в стек.
   - **Пример:** 
     - Вход: `PUSH_CONST 535`
     - Выход: `0xD7, 0x0B, 0x01, 0x00, 0x00`

2. **LOAD_MEM**
   - **Код операции (A):** `81`
   - **Операнд (B):** Смещение (14-битное беззнаковое число).
   - **Результат:** Загружает значение из памяти (адрес = вершина стека + смещение).
   - **Пример:**
     - Вход: `LOAD_MEM 531`
     - Выход: `0xD1, 0x09, 0x01, 0x00, 0x00`

3. **STORE_MEM**
   - **Код операции (A):** `25`
   - **Операнд (B):** Адрес (13-битное беззнаковое число).
   - **Результат:** Сохраняет значение в память по адресу.
   - **Пример:**
     - Вход: `STORE_MEM 9`
     - Выход: `0x99, 0x04, 0x00, 0x00, 0x00`

4. **SGN_OP**
   - **Код операции (A):** `9`
   - **Операнды:** 
     - **B:** Смещение (14-битное беззнаковое число).
     - **C:** Адрес (13-битное беззнаковое число).
   - **Результат:** Выполняет операцию `sgn()` и сохраняет результат в память.
   - **Пример:**
     - Вход: `SGN_OP 894, 245`
     - Выход: `0x09, 0xBF, 0x51, 0x0F, 0x00`

## Использование

### Ассемблер

#### Запуск
```bash
python assembler.py <input_file> <output_file> <log_file>
```

- **`<input_file>`**: Путь к файлу с текстом программы.
- **`<output_file>`**: Путь для сохранения бинарного файла.
- **`<log_file>`**: Путь для сохранения файла-лога.

#### Пример
```bash
python assembler.py program.txt output.bin log.csv
```

### Интерпретатор

(Должен быть реализован отдельно, пока описание только для ассемблера.)

## Тестирование

1. Создайте входной файл с программой в формате, описанном выше.
2. Запустите ассемблер для преобразования программы в машинный код.
3. Проверьте файл-лог на соответствие входным данным.

Пример входного файла:
```asm
PUSH_CONST 535
LOAD_MEM 531
STORE_MEM 9
SGN_OP 894, 245
```

## Результаты

Ассемблер генерирует следующие файлы:
1. **Бинарный файл** — последовательность инструкций УВМ.
2. **Лог-файл** — список инструкций с их параметрами в формате `ключ=значение`.

Пример содержимого лог-файла:
```csv
opcode=87,B=535
opcode=81,B=531
opcode=25,B=9
opcode=9,B=894,C=245
```

## Зависимости

- Python 3.8+
- Модуль `csv` (входит в стандартную библиотеку)
